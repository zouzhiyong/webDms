<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!--<meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">-->
    <title> </title>
    <meta charset="utf-8" />
    <!-- 引入样式 -->
    <link rel="stylesheet" href="Global/css/bootstrap.min.css?ver=20170718" />
    <link rel="stylesheet" href="Global/css/icon.css?ver=20170718" />
    <link rel="stylesheet" href="Global/css/iconfont.css?ver=20170718" />
    <link rel="stylesheet" href="Global/css/font-awesome.css?ver=20170718" />
    <link rel="stylesheet" href="Global/css/index.css?ver=20170718" />
    <link rel="stylesheet" href="Global/css/global.css?ver=20170718" />
    <link rel="stylesheet" href="Global/css/layout.css?ver=20170718" />
    <link rel="stylesheet/less" href="Global/css/color.less" />
    <script src="Global/js/less.min.js?ver=20170703"></script>
</head>

<body>
    <div class="wrapper">
        <header>
            <img src="" class="header_logo">
            <nav class="nav navbar-top-links navbar-right">
                <ul class="header_operations">
                    <li>
                        <a href="javascript:;" data-toggle="modal" data-target="#myModal">
                            <i class="fa fa-tasks"></i> 主题
                        </a>
                        <!-- Modal -->
                        <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="myModalLabel"><label>切换主题色</label></h4>
                                    </div>
                                    <div class="modal-body">
                                        <label>主题颜色</label>
                                        <div>
                                            <input type="color" autocomplete="off" class="input_color" value="#20A0FF">
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-custom-primary J-color-model" data-dismiss="modal">切换</button>
                                        <button type="button" class="btn btn-custom">重置</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="dropdown dropdown-win">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" aria-expanded="false">
                            <i class="fa fa-windows"></i>
                            <span class="username username-hide-on-mobile">窗口模式 </span>

                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <li>
                                <a class="J-window-model" href="javascript:;">
                                    <i class="fa fa-window-restore"></i> <span>切换单窗口</span>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown dropdown-user">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;" aria-expanded="false">
                            <span class="username username-hide-on-mobile">系统管理员 </span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <li>
                                <a class="MyselfMsg-link" href="javascript:;">
                                    <i class="icon iconfont icon-code"></i> 个人资料
                                </a>
                            </li>
                            <li>
                                <a class="Mainset-link" href="javascript:;">
                                    <i class="icon iconfont icon-homeset"></i> 主页设置
                                </a>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <a class="UpdatePwd-link" href="javascript:;">
                                    <i class="icon iconfont icon-lock"></i> 修改密码
                                </a>
                            </li>
                            <li>
                                <a class="logoff-link" href="javascript:;">
                                    <i class="icon iconfont icon-exit"></i> 安全退出
                                    <input id="loginurl" value="Login" type="hidden">
                                </a>
                            </li>
                        </ul>
                    </li>

                </ul>
            </nav>
        </header>
        <div class="side_bar">
            <div class="top_nav">
                <a href="javascript:;">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
            <div class="menu scroll">
                <ul>
                    <li v-for="menuItem in menuData" v-if="menuItem.parent==''">
                        <template v-if="menuItem.code=='0'">
                                <a class="menu_item" href="javascript:;" v-on:click.stop="handleMenuItem(subMenuItem)" data-index="0" expanded="false">
                                        <i class="fa fa-home"></i>
                                        <span class="">主页</span>
                                    </a>
                        </template>
                        <template v-else>
                                <a href="javascript:;" :data-index="menuItem.code" expanded="false">
                                        <i :class="menuItem.icon"></i>
                                        <span class="menu-label">{{menuItem.label}}</span>
                                        <span class="fa fa-angle-left arrow"> </span>
                                    </a>
                                    <ul class="collapse" expanded="false">
                                        <li v-for="subMenuItem in menuData" v-if="subMenuItem.parent==menuItem.code">
                                            <a class="menu_item" href="javascript:;" v-on:click.stop="handleMenuItem(subMenuItem)" data-index="4">
                                                <i class=""></i> {{subMenuItem.label}}
                                            </a>
                                        </li>
                                    </ul>
                        </template>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main">
            <div class="main_tabs">
                <button class="roll-nav roll-left J_tabLeft">
                    <i class="fa fa-backward"></i>
                </button>
                <nav class="page-tabs J_menuTabs">
                    <div class="page-tabs-content" style="margin-left: 0px;">
                        <a v-for="(item,index) in openData" href="javascript:;" :class="[item.active?'active':'']+' J_menuTab'" :data-id="item.code" data-index="12" v-on:click="handleSwitchTab(item)">
                            {{item.label}} 
                            <i v-if="item.code!='0'" class="fa fa-times-circle" v-on:click.stop="handleCloseTab(item,index)"></i></a>
                    </div>
                </nav>

                <button class="roll-nav roll-right J_tabRight">
                    <i class="fa fa-forward"></i>
                </button>
                <div class="btn-group roll-nav roll-right">
                    <button class="dropdown-toggle J_tabClose" data-toggle="dropdown" aria-expanded="false" aria-haspopup="true">
                        关闭操作<span class="caret"></span>

                    </button>
                    <ul role="menu" class="dropdown-menu dropdown-menu-right">
                        <li class="J_tabShowActive"><a>定位当前选项卡</a>
                        </li>
                        <li class="divider"></li>
                        <li class="J_tabCloseAll" v-on:click="handleCloseAll"><a>关闭全部选项卡</a>
                        </li>
                        <li class="J_tabCloseOther" v-on:click="handleCloseOther"><a>关闭其他选项卡</a>
                        </li>
                    </ul>
                </div>

                <a href="javascript:;" class="roll-nav roll-right J_tabExit logoff-link"><i class="fa fa fa-sign-out"></i>退出</a>
            </div>
            <div class="J_mainContent">
                <div v-for="item in openData" class="J_iframe" :data-id="item.code" :style="{display:item.active?'':'none'}">
                    <component :is="item.url">

                    </component>
                </div>
            </div>
            <div class="footer">
                <div class="pull-right ">
                    &copy; 2016 XXX.com 版权所有 ICP证：湘ICP备XXXXXXX
                </div>
            </div>
        </div>


    </div>

    <script src="Global/js/jquery.min.js?ver=20170703"></script>
    <script src="Global/layer/layer.js?ver=20170703"></script>
    <script src="Global/js/bootstrap.min.js?ver=20170703"></script>
    <script src="Global/js/vue.min.js?ver=20170703"></script>
    <script src="Global/js/frame.js?ver=20170703"></script>
    <script src="Global/js/index.js?ver=20170703"></script>
    <script src="Components/vue-page.js?ver=20170703"></script>
</body>

</html>
<script>
    layer.open({
        type: 1,
        title: '欢迎页',
        maxmin: true,
        area: ['800px', '500px'],
        content: '<div style="text-align:center"><h1>欢迎光临</h1></div>',
        end: function() {
            layer.tips('Hi', '#about', {
                tips: 1
            })
        }
    });

    var _vm = new Vue({
        el: '.wrapper',
        data: {
            homePage: {
                code: '0',
                parent: '',
                active: true,
                label: '主页',
                url: ''
            },
            openData: [],
            menuData: [{
                code: '1',
                parent: '',
                icon: 'iconfont icon-setting',
                label: '仓库管理',
                url: 'ck.html'
            }, {
                code: '1-1',
                parent: '1',
                icon: '',
                label: '进货入库单',
                url: 'cust-page'
            }, {
                code: '1-2',
                parent: '1',
                icon: '',
                label: '表单',
                url: 'cust-pages'
            }, {
                code: '2',
                parent: '',
                icon: 'iconfont icon-setting',
                label: '仓库管理2',
                url: 'ck.html'
            }, {
                code: '2-1',
                parent: '2',
                icon: '',
                label: '进货入库单2',
                url: 'ck.html'
            }, {
                code: '2-2',
                parent: '2',
                icon: '',
                label: '表单2',
                url: 'ck.html'
            }, {
                code: '3',
                parent: '',
                icon: 'iconfont icon-setting',
                label: '仓库管理3',
                url: 'ck.html'
            }, {
                code: '3-1',
                parent: '3',
                icon: '',
                label: '进货入库单2',
                url: 'ck.html'
            }, {
                code: '3-2',
                parent: '3',
                icon: '',
                label: '表单3',
                url: 'ck.html'
            }, {
                code: '4',
                parent: '',
                icon: 'iconfont icon-setting',
                label: '仓库管理4',
                url: 'ck.html'
            }, {
                code: '4-1',
                parent: '4',
                icon: '',
                label: '进货入库单2',
                url: 'ck.html'
            }, {
                code: '4-2',
                parent: '4',
                icon: '',
                label: '表单4',
                url: 'ck.html'
            }, {
                code: '5',
                parent: '',
                icon: 'iconfont icon-setting',
                label: '仓库管理3',
                url: 'ck.html'
            }, {
                code: '5-1',
                parent: '5',
                icon: '',
                label: '进货入库单2',
                url: 'ck.html'
            }, {
                code: '5-2',
                parent: '5',
                icon: '',
                label: '表单5',
                url: 'ck.html'
            }]
        },
        created: function() {
            this.menuData.splice(0, 0, this.homePage);
            this.openData.push(this.homePage);
        },
        methods: {
            handleUnActive: function() {
                this.openData.map(function(item) {
                    item.active = false;
                })
            }, //清除激活状态
            handleMenuItem: function(subMenuItem) {
                this.handleUnActive();
                var isActive = false;
                this.openData.map(function(item) {
                    if (item.code == subMenuItem.code) {
                        item.active = true;
                        isActive = true;
                    }
                })

                if (!isActive) {
                    var obj = JSON.parse(JSON.stringify(subMenuItem));
                    obj.active = true;
                    this.openData.push(obj);
                }
            }, //点击菜单打开窗口
            handleSwitchTab: function(item) {
                this.handleUnActive();
                item.active = true;
            }, //选择窗口
            handleCloseTab: function(item, index) {
                this.openData.splice(index, 1);
                //如果当前TAB被激活，就取所有打开窗口的最后一个被激活
                if (item.active == true) {
                    this.openData[this.openData.length - 1].active = true;
                }
            }, //关闭单个窗口
            handleCloseAll: function() {
                this.openData.splice(1, this.openData.length - 1);
                this.openData[0].active = true;
            }, //关闭所有窗口
            handleCloseOther: function() {
                for (var i = 0; i < this.openData.length - 1; i++) {
                    if (this.openData[i].code != '0' && !this.openData[i].active) {
                        this.openData.splice(i--, 1);
                    }
                }

            }, //关闭其它窗口
        }
    })
</script>